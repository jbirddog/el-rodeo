<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="htmx-config" content='{"selfRequestsOnly": false}' />
  <title>El Rodeo</title>
  <link rel="stylesheet" href="https://unpkg.com/normalize.css@8.0.1" />
  <script src="https://unpkg.com/htmx.org@2.0.2"></script>
  <script src="https://c0f4f41c-2f55-4863-921b-sdk-docs.github.io/cdn/metamask-sdk.js"></script>
</head>
<body>
  <header>
    <h1>El Rodeo</h1>
  </header>

  <main>
    <section>
    <button onclick="login();">Login</button>
    </section>
  </main>

  <footer>
    <nav>
      <a href="/">Home</a>
    </nav>
  </footer>
</body>
<script>

const login = async () => {

    const sdk = new MetaMaskSDK.MetaMaskSDK({
      dappMetadata: {
        name: "El Rodeo",
        url: window.location.href,
      },
    });

    await sdk.init();
    /*
    const sig = await sdk.connectAndSign({ msg: "Sign here" });
    alert(sig);
    */

    const num = await window.ethereum.request({ method: 'eth_blockNumber' });
    alert(num);
    console.log(num);
    

/*
const addr = await window.ethereum.request({ method: 'eth_requestAccounts' });
alert(addr);
}
*/


/*
      console.log("here");
    // Because the init process of MetaMask SDK is async.
    setTimeout(() => {
      console.log("here");
      const addr = window.ethereum.request({ method: 'eth_requestAccounts' });
      addr.then(alert, alert);
    }, 0);
    */
}
  </script>
</html>
